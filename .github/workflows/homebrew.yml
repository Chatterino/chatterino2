name: 'Publish Homebrew Cask on Release'
on:
  push:
    tags:
      # Should match semver for mainline releases (not including -beta)
      - 'v2.[0-9]+.[0-9]+'
      # TODO: handle beta and nightly releases
      # Also maybe add check to c2 so update checker mentions using brew?
      # - v2.[0-9]+.[0-9]+-beta(?:[0-9]+)


# Steps:

# 1. Take version number from tag
# 2. Get DMG from DO namespace
# 3. Calculate sha256 hash using DMG
# 4. Run brew install
# 5. Run brew uninstall & validate data dir is removed
# 6. Run brew audit
# 7. Run brew style --fix
